<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–î–∏–∞–≥–Ω–æ—Å</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      overflow-x: hidden;
      overflow-y: scroll;
    }

    .background-container {
      position: relative;
      width: 100%;
      height: auto;
    }

    .background-container img {
      display: block;
      width: 100%;
      height: auto;
    }

    .btn-wrapper {
      position: absolute;
      top: 627px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
    }

    .btn-diagnose {
      padding: 14px 32px;
      font-size: 16px;
      background-color: #111;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      min-width: 240px;
      max-width: 300px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      overflow-y: auto;
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
    }

    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    select,
    input,
    textarea,
    button.next-btn {
      width: 100%;
      padding: 10px;
      margin-top: 15px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .next-btn {
      background-color: #111;
      color: white;
      border: none;
      cursor: pointer;
    }

    .next-btn:hover {
      background-color: #333;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div class="background-container">
  <img src="static/svg/background.svg" alt="Background">
  <div class="btn-wrapper">
    <button class="btn-diagnose" id="openBtn">–ü–†–û–í–ï–†–ò–¢–¨ –î–ò–ê–ì–ù–û–ó</button>
  </div>
</div>

<div class="modal" id="diagnoseModal">
  <div class="modal-content">
    <div class="step step-1 active">
      <h2>üß† –ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</h2>
      <p>–ú—ã –Ω–µ —Ö—Ä–∞–Ω–∏–º –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º –∏—Ö —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.</p>
      <button class="next-btn" onclick="goToStep(2)">–ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å</button>
    </div>

    <div class="step step-2">
      <h2>–û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ</h2>
      <label>–ü–æ–ª:</label><select id="gender"><option>–ú—É–∂—á–∏–Ω–∞</option><option>–ñ–µ–Ω—â–∏–Ω–∞</option></select>
      <label>–í–æ–∑—Ä–∞—Å—Ç:</label><input type="number">
      <label>–†–æ—Å—Ç:</label><input type="number">
      <label>–í–µ—Å:</label><input type="number">
      <label>–°—Ç—Ä–∞–Ω–∞:</label><input type="text">
      <label>–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å / –õ–∞–∫—Ç–∞—Ü–∏—è:</label><select><option>–ù–µ—Ç</option><option>–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å</option><option>–õ–∞–∫—Ç–∞—Ü–∏—è</option></select>
      <button class="next-btn" onclick="goToStep(3)">–î–∞–ª–µ–µ</button>
    </div>

    <div class="step step-3">
      <h2>–°–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ–∑</h2>
      <label>–ü—Ä–æ–±–ª–µ–º–∞:</label><input type="text">
      <label>–î–∏–∞–≥–Ω–æ–∑ (–ú–ö–ë):</label><input type="text">
      <label>–£—Ç–æ—á–Ω–µ–Ω–∏–µ:</label><input type="text">
      <label>–î–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞:</label><input type="date">
      <label>–ß—Ç–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç:</label><textarea id="inputText"></textarea> <!-- ID –¥–æ–±–∞–≤–ª–µ–Ω —Å—é–¥–∞ -->
      <button class="next-btn" onclick="goToStep(4)">–î–∞–ª–µ–µ</button>
    </div>

    <div class="step step-4">
      <h2>–õ–µ—á–µ–Ω–∏–µ</h2>
      <label>–ü—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –ª–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞?</label><input type="text">
      <label>–¢–µ—Ä–∞–ø–∏—è:</label><input type="text">
      <label>–î–∞—Ç–∞:</label><input type="date">
      <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label><textarea></textarea>
      <button class="next-btn" onclick="goToStep(5)">–î–∞–ª–µ–µ</button>
    </div>

    <div class="step step-5">
      <h2>–ê–Ω–∞–ª–∏–∑—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h2>
      <input type="file" multiple>
      <textarea placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"></textarea>
      <button class="next-btn" onclick="goToStep(6)">–î–∞–ª–µ–µ</button>
    </div>
    <div class="step step-6">
      <h2>–ì–æ—Ç–æ–≤–æ</h2>
      <p>üéØ –ú—ã —Å–æ–±—Ä–∞–ª–∏ –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ò–ò –Ω–∞—á–Ω—ë—Ç –∞–Ω–∞–ª–∏–∑ ‚Äî —ç—Ç–æ –∑–∞–π–º–µ—Ç 30‚Äì60 —Å–µ–∫—É–Ω–¥.</p>
      <button class="next-btn" onclick="closeModal(); sendData()">–ê–Ω–∞–ª–∏–∑</button>
    </div>
  </div>
</div>

<script>
  const modal = document.getElementById("diagnoseModal");
  const openBtn = document.getElementById("openBtn");

  openBtn.onclick = () => modal.style.display = "block";
  window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

  function goToStep(step) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.querySelector('.step-' + step).classList.add('active');
  }

  function closeModal() {
    modal.style.display = "none";
  }

  function sendData() {
    const text = document.getElementById("inputText").value;
    fetch("/analyze/", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ text: text })
    })
    .then(response => response.json())
    .then(data => {
        alert("–û—Ç–≤–µ—Ç –ò–ò: " + data.result);
    })
    .catch(error => {
        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ: " + error);
    });
}
</script>

</body>
</html>
